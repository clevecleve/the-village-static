"use strict";(self.webpackChunkconsumer=self.webpackChunkconsumer||[]).push([[1902,2882,2939,3140,8650,8887],{7694:(e,s,t)=>{t.r(s),t.d(s,{default:()=>w});var a=t(69499),c=t(98558),l=t(35853),r=t(80920),n=t(30153),i=t(33590),h=t.n(i),g=t(43210),o=t.n(g),d=t(94551),u=t.n(d),B=t(24827),C=t(61995);class m extends a.Component{constructor(e){super(e),this.handleSearch=()=>{let e="",s="",t="",a="";return this.state.CentreId&&this.state.CentreId.value?(a=this.state.CentreId.value.replace(/{|},|}/g,""),this.searchTerm.current.value&&/\S/.test(this.searchTerm.current.value)?(s=this.searchTerm.current.value,t=s.replace(/&/g,"%26"),h().dataLayer({dataLayer:{event:"performedSearch",searchTerm:this.searchTerm.current.value},dataLayerName:"dataLayer"}),this.setState({showLoader:!0}),e=`/api/sitecore/search/search?keyword=${t}&centreId=${a}`,void o()({url:e,method:"GET"}).then(e=>{let s=e.data?e.data:null;s&&(0===this.searchTerm.current.value.length?this.setState({storeItems:[],categoryItems:[],whatsOnItems:[],pageItems:[]}):(s.RetailerList&&this.setState({storeItems:s.RetailerList,storeDirectoryLabel:s.StoreDirectoryLabel}),s.Categories&&this.setState({categoryItems:s.Categories,categoriesLabel:s.CategoriesLabel}),s.WhatsOn&&this.setState({whatsOnItems:s.WhatsOn,whatsOnLabel:s.WhatsOnLabel}),s.Pages&&this.setState({pageItems:s.Pages,pagesLabel:s.PagesLabel}),0===s.RetailerList.length&&0===s.Categories.length&&0===s.WhatsOn.length&&0===s.Pages.length?this.setState({noSearchResult:s.NoSearchResult}):this.setState({noSearchResult:""}))),this.setState({showLoader:!1})}).catch(e=>{})):(this.setState({noSearchResult:"",storeItems:[],categoryItems:[],whatsOnItems:[],pageItems:[]}),null)):null},this.showRetailerList=()=>{var{storeItems:e=null,storeDirectoryLabel:s=null}=this.state||{};return e.length>0?(0,C.jsx)("div",{className:"col col-12 col-sm-6",children:(0,C.jsx)(r.default,{title:s,data:e})}):null},this.showCatgeoryList=()=>{var{categoryItems:e=null,whatsOnItems:s=null,pageItems:t=null,categoriesLabel:c=null}=this.state||{};return e.length>0?s.length>0||t.length>0?(0,C.jsxs)(a.Fragment,{children:[(0,C.jsx)(l.default,{title:c,data:e}),(0,C.jsx)("hr",{})]}):(0,C.jsx)(l.default,{title:c,data:e}):null},this.showPromotionList=()=>{var{whatsOnLabel:e=null,whatsOnItems:s=null,pageItems:t=null}=this.state||{};return s.length>0?t.length>0?(0,C.jsxs)(a.Fragment,{children:[(0,C.jsx)(n.default,{title:e,data:s}),(0,C.jsx)("hr",{})]}):(0,C.jsx)(n.default,{title:e,data:s}):null},this.showPageList=()=>{var{pageItems:e=null,pagesLabel:s=null}=this.state||{};return e.length>0?(0,C.jsx)(l.default,{title:s,data:e}):null},this.showNoResults=()=>{if(this.state.noSearchResult)return(0,C.jsx)("div",{className:"no-results",children:(0,C.jsx)(c.Text,{field:this.state.noSearchResult})})},this.state={storeDirectoryLabel:"",categoriesLabel:"",whatsOnLabel:"",pagesLabel:"",noSearchResult:"",SearchHelpText:e.fields.SearchHelpText||{},SearchAdditionalText:e.fields.SearchAdditionalText||{},CentreId:e.fields.CentreId||{},storeItems:[],categoryItems:[],whatsOnItems:[],pageItems:[],showLoader:!1},this.searchTerm=a.createRef(),this.handleSearch=u().debounce(this.handleSearch,1e3)}render(){const{showLoader:e,SearchAdditionalText:s}=this.state;return(0,C.jsxs)("div",{className:"search-wrapper container",children:[(0,C.jsx)("div",{className:"row no-gutters",children:(0,C.jsxs)("div",{className:"col search-searchbar align-items-center",children:[(0,C.jsx)("i",{className:"icon icon-outlined-search"}),(0,C.jsx)("input",{className:"form-control rounded-0",autoFocus:!0,type:"text",ref:this.searchTerm,placeholder:this.state.SearchHelpText.value,onChange:this.handleSearch})]})}),s&&s.value?(0,C.jsx)("div",{className:"additional-hint",children:(0,C.jsx)(c.Text,{field:s})}):null,!e&&(0,C.jsxs)("div",{className:"results-wrapper",children:[this.showNoResults(),(0,C.jsxs)("div",{className:"row",children:[this.showRetailerList(),(0,C.jsxs)("div",{className:"col",children:[this.showCatgeoryList(),this.showPromotionList(),this.showPageList()]})]})]}),e&&(0,C.jsx)(B.A,{})]})}}const w=m},24827:(e,s,t)=>{t.d(s,{A:()=>c});t(69499);var a=t(61995);const c=()=>(0,a.jsx)("div",{className:"loader-wrapper",children:(0,a.jsx)("div",{className:"loader"})})},27529:(e,s,t)=>{t.d(s,{fY:()=>c,mh:()=>a});const a=()=>{if(document.documentElement.scrollHeight>window.innerHeight){const e=document.documentElement.scrollTop||document.body.scrollTop;document.documentElement.classList.add("noscroll"),document.documentElement.style.top=`-${e}px`}},c=()=>{const e=parseInt(document.documentElement.style.top||"0px");document.documentElement.classList.remove("noscroll"),window.scrollTo(0,-e)}},30153:(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var a=t(69499),c=t(98558),l=t(48666),r=t(61995);const n=e=>{let{title:s,data:t}=e;return(0,r.jsxs)("div",{className:"search-whatson",children:[(0,r.jsxs)("div",{className:"title",children:[(0,r.jsx)(c.Link,{field:s}),(0,r.jsx)("i",{className:"icon icon-arrow-right"})]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col col-auto",children:t.map((e,s)=>{const{PromotionLink:t=null,Thumbnail:n=null,PromotionType:i=null,PromotionDetails:h=null,IsRetailerContent:g=null,IsLogoAsThumbnail:o=null,Retailer:d}=e||{};return(0,r.jsxs)("div",{className:"row no-gutters whatson-item",children:[(0,r.jsx)("div",{className:"col col-auto whatson-img "+(o&&o.value?"display_retailer_logo":""),children:(0,r.jsx)("a",{href:t.value,children:n&&n.value&&n.value.src?(0,r.jsx)("div",{className:"include_logo_padding",children:(0,r.jsx)(c.Image,{media:{...n.value,src:n.value.src},"data-src":n.value.src,className:"whatson-image lazyload"})}):(0,r.jsxs)(a.Fragment,{children:[g&&g.value&&(0,r.jsx)("div",{className:"display_retailer_name",children:(0,r.jsx)(c.Text,{field:d})}),(0,r.jsx)("img",{src:l,className:"whatson-image"})]})})}),(0,r.jsxs)("div",{className:"col whatson-details",children:[(0,r.jsx)("div",{className:"type",children:(0,r.jsx)(c.Text,{field:i})}),(0,r.jsx)("div",{className:"whatson-description",children:(0,r.jsx)("a",{href:t.value,children:(0,r.jsx)(c.RichText,{field:h})})})]})]},`promID-${s}`)})})})]})}},35853:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});t(69499);var a=t(98558),c=t(61995);const l=e=>{let{title:s,data:t}=e;return(0,c.jsxs)("div",{className:"search-list",children:[(0,c.jsx)("div",{className:"title",children:(0,c.jsx)(a.Text,{field:s})}),(0,c.jsx)("div",{className:"content-list",children:(0,c.jsx)("ul",{children:t.map((e,s)=>{try{const{CategoryName:t=null,PageTitle:l=null,Link:r=null}=e||{};return(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:r.value,children:(0,c.jsx)(a.Text,{field:null===t?l:t})})},`myId-${s}`)}catch(t){}})})})]})}},43926:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var a=t(69499),c=t(98558),l=t(50786),r=t(38475),n=t.n(r),i=t(91809),h=t.n(i),g=t(48666),o=t(33590),d=t.n(o),u=t(94551),B=t.n(u),C=t(43210),m=t.n(C),w=t(27529),I=t(61995);class A extends a.Component{constructor(e){super(e),this.getTopSearches=()=>{let e=[];this.props.fields&&this.props.fields.TopSearches&&this.props.fields.TopSearches.length&&this.props.fields.TopSearches.map(s=>s.fields&&s.fields.SearchTerm&&s.fields.SearchTerm.value?e.push(s.fields.SearchTerm.value):null),this.setState({topSearches:e})},this.handleScroll=()=>{window&&window.outerWidth<992&&(this.state.searchTerm?(0,w.mh)():(0,w.fY)())},this.handleBlur=()=>{this.resetState(),document.querySelector(".nav-item .icon-close")&&document.querySelector(".nav-item .icon-close").click()},this.resetState=()=>{this.setState({searchTerm:"",searchResults:null,noResults:!1,noResultsMessage:"",showLoader:!1})},this.renderInfo=(e,s,t,a)=>{if(s&&s.length){const{centreId:c}=this.state;return(0,I.jsx)("div",{className:"search-info-wrapper",children:(0,I.jsxs)("div",{className:"section-container",children:[(0,I.jsx)("div",{className:"section-title",children:e}),s.map((s,l)=>{for(;l<3;)return(0,I.jsxs)("div",{className:"section-content",onClick:e=>{/clear/.test(e.target.id)||(this.handleSearch(s),this.handleFocus())},children:[(0,I.jsx)("i",{className:`icon icon-${t}`}),(0,I.jsx)("div",{className:"term",children:s}),a&&(0,I.jsx)("i",{id:`${e}-clear-${s}`,className:`icon icon-${a}`,onClick:()=>this.setRecentSearch("remove",c.split("-").pop(),l)})]},`recent-search-term-${l}`)})]})})}return null},this.renderResults=(e,s)=>(0,I.jsx)("div",{className:"search-results-wrapper "+(s?"show-results":""),children:e&&e.length?e.map((e,s)=>{const{Name:t,Link:l,Type:r,Thumbnail:n,IsRetailerContent:i=null,IsLogoAsThumbnail:h=null,Retailer:o}=e;return(0,I.jsx)("a",{href:l&&l.value||null,children:(0,I.jsxs)("div",{className:"search-result-row",children:[(0,I.jsx)("div",{className:"thumbnail "+(h&&h.value?"display_retailer_logo":""),children:(0,I.jsx)("div",{className:"include_logo_padding",children:n&&n.value?(0,I.jsx)("img",{src:n.value}):(0,I.jsx)(a.Fragment,{children:(0,I.jsx)("img",{src:g})})})}),(0,I.jsxs)("div",{className:"search-result-col",children:[(0,I.jsx)("div",{className:"name",children:this.renderSuggestion(t,this.state.searchTerm)}),(0,I.jsx)("div",{className:"type",children:(0,I.jsx)(c.Text,{field:r})})]})]})},`search-result-${s}`)}):(0,I.jsx)("div",{className:"no-results",children:this.state.noResultsMessage})}),this.renderContent=()=>{const{recentSearches:e,topSearches:s,searchTerm:t,searchResults:c,noResults:r,showLoader:n}=this.state;return t?(0,I.jsxs)(a.Fragment,{children:[this.renderResults(c,c&&c.length||r),n&&(0,I.jsxs)("div",{className:"search-skeleton-wrapper",children:[(0,I.jsx)(l.default,{}),(0,I.jsx)(l.default,{}),(0,I.jsx)(l.default,{opacity:"0.8"}),(0,I.jsx)(l.default,{opacity:"0.6"}),(0,I.jsx)(l.default,{opacity:"0.4"}),(0,I.jsx)(l.default,{opacity:"0.2"})]})]}):(0,I.jsxs)(a.Fragment,{children:[this.renderInfo("Recent searches",e,"time","close"),this.renderInfo("Top searches",s,"outlined-search")]})},this.handleSearch=async e=>{const s=e&&/\S/.test(e)?e.replace(/&/g,"%26"):null,{centreId:t}=this.state;this.setState({searchTerm:e,noResults:!1,searchResults:null,showLoader:!0},()=>this.handleScroll()),s&&t&&this.getSearchResults(s,t)},this.cleanRecentSearchTerm=e=>e.replace("%26","&"),this.getSearchResults=async(e,s)=>{e.length>2&&this.setRecentSearch("add",s,this.cleanRecentSearchTerm(e)),d().dataLayer({dataLayer:{event:"performedSearch",searchTerm:e},dataLayerName:"dataLayer"});const t=`/api/sitecore/search/searchBar?keyword=${e}&centreId=${s}`;try{let e=await m()({method:"GET",url:t});e&&e.data?e.data.SearchResults&&e.data.SearchResults.length?this.setState({searchResults:e.data.SearchResults,noResults:!1,noResultsMessage:"",showLoader:!1}):this.setState({searchResults:[],noResults:!0,noResultsMessage:"No results. Please try another keyword.",showLoader:!1}):this.setState({searchResults:[],noResults:!0,noResultsMessage:"Something went wrong. Please try again.",showLoader:!1})}catch(a){console.log(a),this.setState({searchResults:[],noResults:!0,noResultsMessage:"Something went wrong. Please try again.",showLoader:!1})}},this.getRecentSearch=e=>{const s=localStorage.getItem(`RecentSearchFor${e.split("-").pop()}`);let t=[];s&&(-1!==s.indexOf(",")?s.split(",").map(e=>{t.push(e)}):t.push(s)),this.setState({recentSearches:t})},this.setRecentSearch=(e,s,t)=>{const{recentSearches:a}=this.state;let c=a;if("add"===e){const e=c.findIndex(e=>e===t);e>-1&&c.splice(e,1),3===c.length&&c.pop(),c.unshift(t)}else c.splice(t,1);this.setState({recentSearches:c}),localStorage.setItem(`RecentSearchFor${s.split("-").pop()}`,c)},this.handleKeyDown=e=>{27===(e.charCode||e.keyCode)&&this.setState({searchTerm:""},()=>this.handleScroll())},this.handleFocus=()=>{document&&document.querySelector("#consumer-search-bar").focus()},this.renderSuggestion=(e,s)=>{const t=e.value,a=n()(t,s);return h()(t,a).map((e,s)=>{const t=e.highlight?"highlight":null;return(0,I.jsx)("span",{className:`name ${t}`,children:e.text},s)})},this.state={centreId:e.fields&&e.fields.CentreId&&e.fields.CentreId.value?e.fields.CentreId.value.replace(/{|},|}/g,""):null,searchTerm:null,searchResults:null,noResults:!1,noResultsMessage:"",recentSearches:null,showLoader:!1,topSearches:null},this.getSearchResults=B().debounce(this.getSearchResults,1e3)}componentDidMount(){window&&window.outerWidth>=992&&window.addEventListener("resize",this.handleBlur),this.getRecentSearch(this.state.centreId),this.getTopSearches()}render(){const{searchTerm:e,searchResults:s,noResults:t}=this.state;return(0,I.jsxs)("div",{className:"search-bar-container",id:"search-bar",children:[(0,I.jsxs)("div",{className:"searchbar",children:[e?s&&s.length||t?(0,I.jsx)("i",{className:"icon icon-outlined-search"}):(0,I.jsx)("div",{className:"mini-loader"}):(0,I.jsx)("i",{className:"icon icon-outlined-search"}),(0,I.jsx)("input",{autoFocus:!0,id:"consumer-search-bar",type:"text",placeholder:"Search for anything",onKeyDown:e=>this.handleKeyDown(e),value:e,onChange:e=>this.handleSearch(e.target.value)}),(0,I.jsx)("div",{className:"search-cancel",onClick:()=>this.handleBlur(),children:"Cancel"})]}),this.renderContent()]})}}const j=A},48666:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0CAIAAABEtEjdAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAawSURBVHhe7dQBDQAADMOg+5c6FffRgAhuAOTIHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgcIkjtAkNwBguQOECR3gCC5AwTJHSBI7gBBcgfI2R5jTYfLh3foSgAAAABJRU5ErkJggg=="},50786:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});t(69499);var a=t(47066),c=t(61995);const l=e=>{const{opacity:s=1}=e;return(0,c.jsxs)(a.Ay,{style:{width:"100%",opacity:s},height:56,title:"",backgroundColor:"#f7f7f7",foregroundColor:"#ececec",children:[(0,c.jsx)("rect",{x:"70",y:"22",rx:"5",ry:"5",width:"380",height:"14"}),(0,c.jsx)("rect",{x:"20",y:"10",rx:"4",ry:"4",width:"40",height:"40"})]})}},73362:(e,s,t)=>{t.r(s),t.d(s,{default:()=>i});var a=t(69499),c=t(7694),l=t(43926),r=t(61995);class n extends a.Component{render(){return this.props.isSimple?(0,r.jsx)(l.default,{fields:this.props.fields}):(0,r.jsx)(c.default,{fields:this.props.fields})}}const i=n},80920:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});t(69499);var a=t(98558),c=t(48666),l=t(61995);const r=e=>{let{title:s,data:t}=e;return(0,l.jsxs)("div",{className:"search-storedirectory",children:[(0,l.jsxs)("div",{className:"title",children:[(0,l.jsx)(a.Link,{field:s}),(0,l.jsx)("i",{className:"icon icon-arrow-right"})]}),(0,l.jsx)("div",{className:"content-list",children:(0,l.jsx)("ul",{className:"list",children:t.map((e,s)=>{const{RetailerLink:t=null,Logo:r=null,RetailerName:n=null}=e||{};return(0,l.jsx)("li",{children:(0,l.jsxs)("div",{className:"row align-items-center no-gutters",children:[(0,l.jsx)("div",{className:"col-auto defaultImg",children:(0,l.jsx)("a",{href:t.value,children:r&&r.value?(0,l.jsx)(a.Image,{media:{...r.value,src:r.value.src},"data-src":r.value.src,className:"lazyload"}):(0,l.jsx)("img",{src:c})})}),(0,l.jsx)("div",{className:"col",children:(0,l.jsx)("a",{href:t.value,children:(0,l.jsx)(a.Text,{field:n})})})]})},`myId-${s}`)})})})]})}}}]);
//# sourceMappingURL=SearchModal.20e87fc1.chunk.js.map